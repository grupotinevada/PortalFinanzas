<div class="container mx-auto p-4">
  <h2 class="text-2xl font-bold mb-4 text-center">Solicitudes de Cambio</h2>

  <div *ngIf="showSpinner" class="text-center">
    <p>Cargando solicitudes...</p>
  </div>

  <table *ngIf="!showSpinner && solicitudes.length" class="min-w-full bg-white shadow-md rounded-lg overflow-hidden">
    <thead class="bg-gray-800 text-white">
      <tr>
        <th class="px-4 py-2">Solicitante</th>
        <th class="px-4 py-2">Fecha de Solicitud</th>
        <th class="px-4 py-2">Descripción</th>
        <th class="px-4 py-2">Cambios</th>
        <th class="px-4 py-2">Estado</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let solicitud of solicitudes" class="border-b">
        <td class="px-4 py-2">{{ solicitud.nombreSolicitante }}</td>
        <td class="px-4 py-2">{{ solicitud.fechaSolicitud | date: 'shortDate' }}</td>
        <td class="px-4 py-2">{{ solicitud.descripcionSolicitud }}</td>
        <td class="px-4 py-2">
          <ul>
            <li *ngFor="let key of getKeys(solicitud.cambios)">
              <strong>{{ key }}:</strong> 
              <span class="text-red-600">{{ solicitud.cambios[key].anterior }}</span> 
              → 
              <span class="text-green-600">{{ solicitud.cambios[key].nuevo }}</span>
            </li>
          </ul>
        </td>
        <td class="px-4 py-2">
          <span [ngClass]="{
            'text-green-500 font-bold': solicitud.estadoSolicitud === 'Aprobado',
            'text-yellow-500 font-bold': solicitud.estadoSolicitud === 'Pendiente',
            'text-red-500 font-bold': solicitud.estadoSolicitud === 'Rechazado'
          }">
            {{ solicitud.estadoSolicitud }}
          </span>
        </td>
      </tr>
    </tbody>
  </table>

  <p *ngIf="!showSpinner && !solicitudes.length" class="text-center text-gray-500">
    No hay solicitudes pendientes por mostrar.
  </p>
</div>